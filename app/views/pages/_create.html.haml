.form
  = form_for page do |f|
    - unless Genre.names.blank?
      = label_tag :genre, "Genre:"
      = select_tag :genre, options_for_select([nil] + Genre.names, @genre.try(:name))
      = label_tag :genre2, "Genre2:"
      = select_tag :genre2, options_for_select([nil] + Genre.names, @genre2.try(:name))
      %br
    - unless Author.names.blank?
      = label_tag :author, "Author:"
      = select_tag :author, options_for_select([nil] + Author.names, @author.try(:name))
      %br
    = hinted_text_field_tag 'page[title]', page.title, "Title"
    %br
    = hinted_text_area_tag 'page[my_notes]', page.my_notes, "My Notes", :rows => 1, :cols => 30
    %br
    = hinted_text_area_tag 'page[notes]', page.notes, "Notes", :rows => 1, :cols => 30
    %br
    - if called_by == "multiple"
      = hinted_text_field_tag 'page[base_url]', page.base_url, Page::BASE_URL_PLACEHOLDER, :maxlength => 255, :size => 80
      %br
      = hinted_text_field_tag 'page[url_substitutions]', page.url_substitutions, Page::URL_SUBSTITUTIONS_PLACEHOLDER, :maxlength => 255, :size => 80
      %br
      = hinted_text_area_tag 'page[urls]', page.urls, Page::URLS_PLACEHOLDER, :rows => 10, :cols => 80
    - else
      = hinted_text_field_tag 'page[url]', page.url, "URL"
    %br
    = f.submit "Store", :name => "Store"
